<!-- app/views/restaurants/_form.html.erb -->
<div class="full-height full-width-container pt-5 pb-5 px-5 rounded" data-controller='formtoggle'>
  <h2>Nouveau projet</h2>
    <div class="curved-container bg-white rounded shadow p-4">
    <h3 data-formtoggle-target="count">1/3</h3>
      <div class="progress">
        <div data-formtoggle-target="progress" class="progress-bar bg-warning" role="progressbar" style="width: 33%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
      </div>

      <div class="row mt-4">
        <%= simple_form_for (@project), data: { controller: "datepicker"} do |f| %>
          <div class="col" data-target='formtoggle.page1'>
            <h3 class="pb-4"><%= f.label :work_ids, "Quels travaux souhaitez-vous réaliser en rapport avec votre DPE?" %></h3>
            <div class="row">
              <% Work.all.each do |work| %>
                <div class="col-md-4 mb-3">
                  <div class="card card-new">
                    <div class="card-body">
                      <%= f.check_box :work_ids, { multiple: true, class: "d-none" }, work.id, nil %>
                      <%= f.label :work_ids, for: "project_work_ids_#{work.id}" do %>
                        <div class="work">
                          <%= image_tag image_for_work(work), width: 35, height: 35, class: "ldslkdssdk" %>
                          <%= work.name %>
                        </div>
                      <% end %>
                    </div>
                  </div>
                </div>
              <% end %>
            </div>
            <div class="d-flex justify-content-end mt-3">
            <%= link_to "javascript:void(0);", class: "btn-main", data: { action: "formtoggle#nextPage" } do %>
              Suivant
             <i class="fa-solid fa-arrow-right"></i>
            <% end %>
            </div>
          </div>
          <div class="col d-none" data-target='formtoggle.page2'>
            <h3> <span class="number-round">1</span> Description de votre projet</h3>
            <%= f.input :title, label: 'Titre' %>
            <%= f.input :description %>
            <h3> <span class="number-round">2</span> Vos besoins</h3>
            <%= f.input :surface %>
            <%= f.input :nombre_de_pieces, label: "Nombre de pièces" %>
            <%= f.input :budget %>
            <%= f.input :start_date, label: 'Date de début de votre projet', as: :string, input_html: { data: { datepicker_target: "startDate"} } %>
            <%= f.input :photo, as: :file %>
            <h3> <span class="number-round">3</span> Votre lieu d'intervention</h3>
            <%= f.input :location, label: 'Adresse', input_html: { data: { location_autocomplete_target: "address" }},
            wrapper_html: { data: { controller: "location-autocomplete", location_autocomplete_api_key_value: ENV["MAPBOX_API_KEY"] }} %>
            <%= f.submit "Créer mon projet", class: "btn-main" %>
          </div>
        <% end %>
      </div>
    </div>
</div>
